{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Dashboard - SB Admin</title>
    <link rel="stylesheet" type="text/css" href="{% static 'home.css' %}" />
    <link
      href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body class="sb-nav-fixed">
    {% include 'home/navbar.html' %}
    <div id="layoutSidenav">
      {% include 'home/sidebar.html' %}
      <div id="layoutSidenav_content">
        {% for message in messages %}
        <div
          class="alert alert-{{ message.tags }} mb-0 alert-dismissible fade show my-10"
          role="alert"
        >
          <strong>Message :</strong>{{ message }}
          <button
            type="button"
            class="close"
            data-dismiss="alert"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        {% endfor %}
        <main>
          <div class="container-fluid">
            <h1 class="mt-4">
              <i class="fad fa-analytics"></i> Expense Tracker
            </h1>
            <img
              src="{% static 'img/Dashboard.webp' %}"
              alt="logo"
              width="100%"
              height="500"
            />
            <br />
            <br />
            <div class="card mb-4">
              <div class="card-header">
                  <div class="container my-2">
                      <i class="fas fa-table mr-1"></i> Records

                      <!-- Download PDF Button -->
                      <a href="{% url 'download_expenses' %}" class="btn btn-primary" style="float: right; margin-left: 10px;">
                          Download PDF
                      </a>

                      <!-- Existing Add Expense/Income Button -->
                      <button class='btn btn-success' style='float: right;' onclick="location.href='/addmoney';">
                          Add Expense/Income
                      </button>
                  </div>
              </div>
              <div class="card-body">
                  <div class="table-responsive">
                      <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                      <tr>
                        <th>What you added</th>
                        <th>Amount</th>
                        <th>Category</th>
                        <th>Date</th>
                        <th></th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for info in page_obj %}
                      <tr>
                        <td>{{info.add_money}}</td>
                        <td>{{info.quantity}}</td>
                        <td>{{info.Category.name}}</td>
                        <td>{{info.Date}}</td>
                        <td>
                          <a
                            href="{% url 'expense_edit' info.id %}"
                            class="btn btn-success"
                            >Edit</a
                          >
                        </td>
                        <td>
                          <a
                            href="{% url 'expense_delete' info.id %}"
                            class="btn btn-danger"
                            >Delete</a
                          >
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="">
                Showing page {{page_obj.number}} of
                {{page_obj.paginator.num_pages}}
              </div>
              <nav aria-label="Page navigation example">
                <ul class="pagination align-right float-right mr-auto">
                  {% if page_obj.has_previous %}
                  <li class="page-item">
                    <a class="page-link" href="?page=1" tabindex="-1"
                      >&laquo; first</a
                    >
                  </li>
                  <li class="page-item">
                    <a
                      class="page-link"
                      href="?page={{ page_obj.previous_page_number }}"
                      >Previous</a
                    >
                  </li>
                  {% endif %} {% if page_obj.has_next %}
                  <li class="page-item">
                    <a
                      class="page-link"
                      href="?page={{ page_obj.next_page_number }}"
                      >Next</a
                    >
                  </li>
                  <li class="page-item">
                    <a
                      class="page-link"
                      href="?page={{ page_obj.paginator.num_pages }}"
                      >last &raquo;</a
                    >
                  </li>
                  {% endif %}
                </ul>
              </nav>
              <br />
            </div>
            <!-- Add the canvas for the chart -->
            <div class="card mb-4">
              <div class="card-header">
                <i class="fas fa-chart-area mr-1"></i>
                Area Chart Example
              </div>
              <div class="card-body">
                <canvas id="myAreaChart" width="100%" height="40"></canvas>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="{% static 'js/scripts.js'%}"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="{% static 'assets/demo/chart-area-demo.js'%}"></script>
    <script src="{% static 'assets/demo/chart-bar-demo.js'%}"></script>
    <script
      src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="{% static 'assets/demo/datatables-demo.js'%}"></script>
  </body>
</html>
